cyclical dependencies/module design advice pls?

incorporating State monad?

can we drop minimization (pls pls pls)?